@using ExtremeBicycle.Models.Entities;
@using Microsoft.EntityFrameworkCore;
@model IEnumerable<Product>

@{
    ViewData["Title"] = "Products";
}
<div id="product-page-row">
    <aside id="product-aside">
        <h1>Searched Items</h1>
        <h2>Home / searched</h2>
        <section class="product-filter">
            <div class="product-filter-heading">
                <h3>Price</h3>
                <div class="product-filter-collapse-container">
                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/Icon_ArrowDown.png" class="product-down-arrow">
                </div>
            </div>
            <div class="product-filter-content">
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-price-300plus" />
                    <label for="p-filter-price-300plus">$300 to $499.99</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-price-500plus" />
                    <label for="p-filter-price-300plus">$500 to $699.99</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-price-700plus" />
                    <label for="p-filter-price-300plus">$700 to $899.99</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-price-900plus" />
                    <label for="p-filter-price-300plus">$900 and up</label>
                </div>
            </div>
        </section>

        <section class="product-filter">
            <div class="product-filter-heading">
                <h3>Color</h3>
                <div class="product-filter-collapse-container">
                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/Icon_ArrowDown.png" class="product-down-arrow">
                </div>
            </div>
            <div class="product-filter-content">
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-color-black" />
                    <label for="p-filter-color-black">Black</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-color-blue" />
                    <label for="p-filter-color-blue">Blue</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-color-grey" />
                    <label for="p-filter-color-grey">Grey</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-color-red" />
                    <label for="p-filter-color-red">Red</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-color-white" />
                    <label for="p-filter-color-white">White</label>
                </div>
            </div>

        </section>

        <section class="product-filter">
            <div class="product-filter-heading">
                <h3>Brand</h3>
                <div class="product-filter-collapse-container">
                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/Icon_ArrowDown.png" class="product-down-arrow">
                </div>
            </div>
            <div class="product-filter-content">
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-brand-electra" />
                    <label for="p-filter-brand-electra">Electra</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-brand-giant" />
                    <label for="p-filter-brand-giant">Giant</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-brand-liv" />
                    <label for="p-filter-brand-liv">Liv</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-brand-momentum" />
                    <label for="p-filter-brand-momentum">Momentum</label>
                </div>
                <div class="product-filter-row">
                    <input type="checkbox" id="p-filter-brand-trek" />
                    <label for="p-filter-brand-trek">Trek</label>
                </div>
            </div>
        </section>
    </aside>
    <section id="product-store-section">
        <div id="product-store-header">
            <div id="p-store-header-content">
                <p>Sort By</p>
                <div id="p-store-dropdown-img-container">
                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/Icon_ArrowDown.png" class="product-down-arrow">
                </div>
            </div>
        </div>
        <ul id="product-list">
            @foreach (var product in Model)
            {
                <li class="product-li">
                    <a class="product-card" asp-area="admin" asp-controller="products" asp-action="details" asp-route-id="@product.ProductID">
                        <div class="product-img-container">
                            @switch(product.ProductType.ProductTypeName.ToString())
                            {
                                case "Gloves":
                                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/Icon_Gloves.png">
                                    break;
                                case "Helmets":
                                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/ShopByCategories_Helmets.png">
                                    break;
                                case "Locks":
                                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/ShopByCategories_Locks.png">
                                    break;
                                case "Saddles":
                                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/ShopByCategories_Locks.png">
                                    break;
                                default:
                                    var tmp = product.ProductType.ToString();
                                    <img src="~/ExtremeBicycleShop/ExtremeBicycleShop_V2/Bikes_Trek3000.png">
                                    break;
                            }
                            
                        </div>
                        <div class="product-title-row">
                            <h3>@product.ProductName</h3>
                            <div class="product-heart-container">
                                <i class="fa-regular fa-heart"></i>
                            </div>
                        </div>
                        @{
                            string price = String.Format("{0:C2}", Convert.ToInt32(product.PriceSRP));
                        }
                        <h3>@price</h3>
                        <p>nisi scelerisque eu ultrices vitae auctor eu augue ut lectus arcu bibendum at varius vel pharetra vel turpis nunc eget</p>
                    </a>
                </li>
            }
        </ul>
        <h2>See More</h2>
    </section>
</div>
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        $('.product-filter-heading').click(function () {
            var $arrow = $(this).find('img');
            var $content = $(this).next();

            $content.toggleClass('open');

            if ($content.hasClass('open')) {
                let height = `${$content.prop('scrollHeight')}px`;

                $content.css('height', height);
                $arrow.css('transform', 'rotate(180deg)');
            }
            else {
                $content.css('height', '0px');
                $arrow.css('transform', 'rotate(0deg)');
            }

        });
    </script>
}
